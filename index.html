<div id="buyer-marketplace" style="display: none; opacity: 0; transition: opacity 1s ease;">
    <header>
        <div class="logo">ðŸ›’ Rescue Marketplace</div>
        <div style="font-size: 0.8rem; opacity: 0.7;">Role: <span style="color:var(--primary-green)">Verified Processor</span></div>
    </header>

    <div class="container">
        <div class="hero" style="text-align: left; padding: 2rem 0;">
            <h1 style="color: var(--dark-green); font-size: 2.5rem;">Rescue Opportunities</h1>
            <p>High-quality surplus and pivot-ready produce within 50km.</p>
        </div>

        <div class="inventory-grid" id="marketGrid">
            <div class="crop-card" style="border-left: 5px solid var(--primary-green);">
                <span class="expiry-badge" style="background: #dcfce7; color: #166534;">Pivot Ready: Sauce Base</span>
                <h3>500kg Ripe Tomatoes</h3>
                <p>Location: 12km away | Farm: GreenValley</p>
                <div style="margin: 1rem 0; font-weight: 700; font-size: 1.2rem; color: var(--dark-green);">$0.45 / kg</div>
                <button class="btn btn-primary" onclick="placeOrder('500kg Tomatoes')">Instant Order</button>
            </div>

            <div class="crop-card">
                <span class="expiry-badge">Expiring in 24h</span>
                <h3>1200kg Mangoes</h3>
                <p>Location: 8km away | Farm: Sunny Orchard</p>
                <div style="margin: 1rem 0; font-weight: 700; font-size: 1.2rem; color: var(--dark-green);">$0.80 / kg</div>
                <button class="btn btn-primary" onclick="placeOrder('1200kg Mangoes')">Instant Order</button>
            </div>
        </div>
    </div>
</div>

<div id="role-nav" style="display:none; position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); background: var(--dark-green); padding: 10px 20px; border-radius: 50px; z-index: 1000; box-shadow: 0 10px 30px rgba(0,0,0,0.2);">
    <button class="btn" style="background: transparent; color: white; font-size: 0.8rem;" onclick="switchRole('farmer')">Farmer View</button>
    <span style="color: rgba(255,255,255,0.3)">|</span>
    <button class="btn" style="background: transparent; color: white; font-size: 0.8rem;" onclick="switchRole('buyer')">Buyer View</button>
</div>

<script>
    // Logic to switch between Farmer and Buyer roles
    function switchRole(role) {
        const farmerDash = document.getElementById('main-dashboard');
        const buyerDash = document.getElementById('buyer-marketplace');
        
        if (role === 'buyer') {
            farmerDash.style.display = 'none';
            buyerDash.style.display = 'block';
            setTimeout(() => { buyerDash.style.opacity = '1'; }, 50);
        } else {
            buyerDash.style.display = 'none';
            farmerDash.style.display = 'block';
            setTimeout(() => { farmerDash.style.opacity = '1'; }, 50);
        }
    }

    // New Order Logic
    function placeOrder(item) {
        alert("Order Placed Successfully for " + item + "! Logistics are being routed.");
    }

    // Update initRescue to show the role nav
    const originalInitRescue = initRescue;
    initRescue = function() {
        originalInitRescue();
        setTimeout(() => {
            document.getElementById('role-nav').style.display = 'flex';
        }, 1000);
    };
</script>
